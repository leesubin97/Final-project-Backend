<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="bit.com.a.dao.AdminSalesDao">

<select id="dailySales" resultType="java.lang.Integer">
	SELECT SUM(PRICE)
	FROM(SELECT PRICE FROM ORDER_BUY
		 WHERE SUBSTR(OBDATE,1,8)=SUBSTR(SYSDATE,1,10))
</select>

<select id="monthlySales" resultType="java.lang.Integer">
	SELECT SUM(PRICE)
	FROM(SELECT PRICE FROM ORDER_BUY
		 WHERE SUBSTR(OBDATE,1,5)=SUBSTR(SYSDATE,1,5))
</select>

<select id="annualSales" resultType="java.lang.Integer">
	SELECT SUM(PRICE)
	FROM(SELECT PRICE FROM ORDER_BUY
		 WHERE SUBSTR(OBDATE,1,2)=SUBSTR(SYSDATE,1,2))
</select>

<select id="totalSales" resultType="java.lang.Integer">
	SELECT SUM(PRICE)
	FROM ORDER_BUY
</select>


<select id="selDailySales" parameterType="java.lang.String" resultType="bit.com.a.dto.PurchasesDto">
	SELECT SUM(PRICE) AS PRICE, OBDATE
	FROM ORDER_BUY
	GROUP BY OBDATE
	HAVING SUBSTR(OBDATE,1,5)=#{yearmonth}
</select>

<select id="selMonthlySales" parameterType="java.lang.String" resultType="bit.com.a.dto.PurchasesDto">
	SELECT SUM(PRICE) AS PRICE, SUBSTR(OBDATE,1,5) AS OBDATE
	FROM ORDER_BUY
	WHERE SUBSTR(OBDATE,1,2)=#{year}
	GROUP BY SUBSTR(OBDATE,1,5)
</select>

<select id="selAnnualSales" parameterType="java.lang.String" resultType="bit.com.a.dto.PurchasesDto">
	SELECT SUM(PRICE) AS PRICE, SUBSTR(OBDATE,1,2) AS OBDATE
	FROM ORDER_BUY
	GROUP BY SUBSTR(OBDATE,1,2)
</select>


<!--주문 건수 (오늘/ 이번달/ 이번년도/ 총)  -->
<select id="CountDailySales" resultType="java.lang.Integer">
	SELECT COUNT(PRICE)
	FROM(SELECT PRICE FROM ORDER_BUY
		 WHERE SUBSTR(OBDATE,1,8)=SUBSTR(SYSDATE,1,10))
</select>

<select id="CountMonthlySales" resultType="java.lang.Integer">
	SELECT COUNT(PRICE)
	FROM(SELECT PRICE FROM ORDER_BUY
		 WHERE SUBSTR(OBDATE,1,5)=SUBSTR(SYSDATE,1,5))
</select>

<select id="CountAnnualSales" resultType="java.lang.Integer">
	SELECT COUNT(PRICE)
	FROM(SELECT PRICE FROM ORDER_BUY
		 WHERE SUBSTR(OBDATE,1,2)=SUBSTR(SYSDATE,1,2))
</select>

<select id="CountTotalSales" resultType="java.lang.Integer">
	SELECT COUNT(PRICE)
	FROM ORDER_BUY
</select>


</mapper>